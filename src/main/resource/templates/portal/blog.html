<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>On The Way</title>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">

        <link rel="stylesheet" href="../../static/portal/css/bootstrap.css">
        <link rel="stylesheet" href="../../static/portal/css/bootstrap-theme.css">
        <link rel="stylesheet" href="../../static/portal/css/fontAwesome.css">
        <link rel="stylesheet" href="../../static/portal/css/light-box.css">
        <link rel="stylesheet" href="../../static/portal/css/templatemo-style.css">

        <link href="https://fonts.googleapis.com/css?family=Kanit:100,200,300,400,500,600,700,800,900" rel="stylesheet">

        <script src="../../static/portal/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
        <script src="../../static/portal/js/vendor/jquery-1.11.2.min.js"></script>
        <script src="../../static/js/common/common.js"></script>
        <script src="../../static/portal/js/vendor/bootstrap.min.js"></script>

        <script src="../../static/portal/js/plugins.js"></script>
        <script src="../../static/portal/js/main.js"></script>
    </head>


<body>

    <nav>
        <div class="logo">
            <a href="index.html">Gala<em>xy</em></a>
        </div>
      <div class="menu-icon">
        <span></span>
      </div>
    </nav>

    <div class="page-heading">
        <div class="container">
            <div class="heading-content">
                <h1>Our <em>Blog</em></h1>
            </div>
        </div>
    </div>


    <div class="blog-entries">
        <div class="container">
            <div class="col-md-9">
<!--                <div class="blog-posts" th:fragment="article_type" id="contents_refresh">-->
<!--                    <div id="contents" class="row"  th:each="resource:${resources.records}">-->
<!--                        <div class="col-md-12">-->
<!--                            <div class="blog-post">-->
<!--                                <img src="img/blog_post_3.png" alt="">-->
<!--                                <div class="text-content">-->
<!--                                    <span><a href="#" th:text="${resource.userId}"></a> /-->
<!--                                        <a href="#" th:text="${#dates.format(resource.createTime, 'yyyy-MM-dd HH:mm:ss')}"></a> /-->
<!--                                        <a href="#" th:text="${resource.type}"></a></span>-->
<!--                                    <h2 th:text="${resource.title}"></h2>-->
<!--                                    <p th:text="${resource.description}"></p>-->
<!--                                    <div class="simple-btn">-->
<!--                                       <a th:href="@{'../bizArticle/singlePost/'+${resource.id}}">继续阅读</a>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        &lt;!&ndash;<div class="col-md-12">-->
<!--                            <div class="blog-post">-->
<!--                                <img src="img/blog_post_1.png" alt="">-->
<!--                                <div class="text-content">-->
<!--                                    <span><a href="#">Admin</a> / <a href="#">16 September 2018</a> / <a href="#">Branding</a></span>-->
<!--                                    <h2>Duis mollis orci vel lectus</h2>-->
<!--                                    <p>Proin at augue quam. In laoreet arcu id lacus fringilla auctor. Etiam rutrum aliquet nisl, eu fermentum elit fermentum sed. Donec finibus urna sed sollicitudin egestas. In hac habitasse platea dictumst. -->
<!--                                    <br><br>Phasellus purus turpis, porta non lectus vitae, laoreet blandit diam. Suspendisse elementum ligula at purus gravida, vel malesuada dolor accumsan. Morbi finibus dapibus ex, ut finibus felis.</p>-->
<!--                                    <div class="simple-btn">-->
<!--                                        <a href="single-post.html">continue reading</a>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div class="col-md-12">-->
<!--                            <div class="blog-post">-->
<!--                                <img src="img/blog_post_2.png" alt="">-->
<!--                                <div class="text-content">-->
<!--                                    <span><a href="#">Admin</a> / <a href="#">28 August 2018</a> / <a href="#">Lifestyle</a></span>-->
<!--                                    <h2>Integer scelerisque odio elit</h2>-->
<!--                                    <p>Aliquam erat volutpat. Donec condimentum ante nec sapien sodales, ut molestie mauris scelerisque. Maecenas in turpis sed odio pretium tempor. In libero tellus, maximus in accumsan id, posuere non urna. -->
<!--                                    <br><br>Fusce ex elit, congue vitae interdum et, sodales vitae purus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Quisque id egestas nibh. Curabitur convallis cursus pharetra. Curabitur non ligula id lacus pulvinar sollicitudin. Etiam quis tempus lectus, sed iaculis ex.</p>-->
<!--                                    <div class="simple-btn">-->
<!--                                        <a href="single-post.html">continue reading</a>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>&ndash;&gt;-->

<!--                    </div>-->
<!--                </div>-->
                <div class="blog-posts" >
                    <div id="contents" >
                        <!--<div class="col-md-12">
                            <div class="blog-post">
                                <img src="img/blog_post_1.png" alt="">
                                <div class="text-content">
                                    <span><a href="#">Admin</a> / <a href="#">16 September 2018</a> / <a href="#">Branding</a></span>
                                    <h2>Duis mollis orci vel lectus</h2>
                                    <p>Proin at augue quam. In laoreet arcu id lacus fringilla auctor. Etiam rutrum aliquet nisl, eu fermentum elit fermentum sed. Donec finibus urna sed sollicitudin egestas. In hac habitasse platea dictumst.
                                    <br><br>Phasellus purus turpis, porta non lectus vitae, laoreet blandit diam. Suspendisse elementum ligula at purus gravida, vel malesuada dolor accumsan. Morbi finibus dapibus ex, ut finibus felis.</p>
                                    <div class="simple-btn">
                                        <a href="single-post.html">continue reading</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="blog-post">
                                <img src="img/blog_post_2.png" alt="">
                                <div class="text-content">
                                    <span><a href="#">Admin</a> / <a href="#">28 August 2018</a> / <a href="#">Lifestyle</a></span>
                                    <h2>Integer scelerisque odio elit</h2>
                                    <p>Aliquam erat volutpat. Donec condimentum ante nec sapien sodales, ut molestie mauris scelerisque. Maecenas in turpis sed odio pretium tempor. In libero tellus, maximus in accumsan id, posuere non urna.
                                    <br><br>Fusce ex elit, congue vitae interdum et, sodales vitae purus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Quisque id egestas nibh. Curabitur convallis cursus pharetra. Curabitur non ligula id lacus pulvinar sollicitudin. Etiam quis tempus lectus, sed iaculis ex.</p>
                                    <div class="simple-btn">
                                        <a href="single-post.html">continue reading</a>
                                    </div>
                                </div>
                            </div>
                        </div>-->

                    </div>
                </div>
                <div class="col-md-12">
                    <!--<ul class="page-number">
                        <li class="active"><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">></a></li>
                   </ul>-->
                    <div id="pageBox" style="width:1000px;margin: 30px auto;">
                    </div>
                </div>
            </div>
            <!--左侧菜单-->
<!--            <div class="col-md-3" id="right_meun" /></div>-->
            <div class="col-md-3"  id="meun_refresh">
                <div class="side-bar" >
                    <div class="search">
                        <fieldset>
                            <input name="search" type="text" class="form-control" id="search" placeholder="Search..." required="">
                        </fieldset>
                    </div>
                    <div class="archives">
                        <div class="sidebar-heding">
                            <h2>Archives</h2>
                        </div>
                        <ul id="recentSixMonthTotal">
                            <li><a href="#">> 2018 September (4)</a></li>
                            <!--<li><a href="#">> 2018 August (16)</a></li>
                            <li><a href="#">> 2018 July (5)</a></li>
                            <li><a href="#">> 2018 May (3)</a></li>
                            <li><a href="#">> 2018 February (27)</a></li>
                            <li><a href="#">> 2017 December (18)</a></li>
                            <li><a href="#">> 2017 November (12)</a></li>-->
                        </ul>
                    </div>
                    <div class="recent-posts">
                        <div class="sidebar-heding">
                            <h2>Recent Posts</h2>
                        </div>
                        <ul>
                            <li><a href="single-post.html">
                                <img src="img/recent_post_1.png" alt="Recent Post 1">
                                <div class="text">
                                    <h6>Duis mollis orci</h6>
                                    <span>15 September 2018</span>
                                </div>
                            </a></li>
                            <li><a href="single-post.html">
                                <img src="img/recent_post_2.png" alt="Recent Post 2">
                                <div class="text">
                                    <h6>Etiam quis tem</h6>
                                    <span>10 August 2018</span>
                                </div>
                            </a></li>
                            <li><a href="single-post.html">
                                <img src="img/recent_post_3.png" alt="Recent Post 3">
                                <div class="text">
                                    <h6>Proin at augue</h6>
                                    <span>16 July 2018</span>
                                </div>
                            </a></li>
                        </ul>
                    </div>
                    <div class="categories">
                        <div class="sidebar-heding">
                            <h2>Categories</h2>
                        </div>
                        <ul>
                            <li><a href="#">> Lifestyle (7)</a></li>
                            <li><a href="#">> Branding (9)</a></li>
                            <li><a href="#">> Nature (14)</a></li>
                            <li><a href="#">> Work Stuff (6)</a></li>
                            <li><a href="#">> Science (5)</a></li>
                        </ul>
                    </div>
                    <div class="latest-gallery">
                        <div class="sidebar-heding">
                            <h2>Latest Gallery</h2>
                        </div>
                        <ul >
                            <li><a href="#"></a><img src="img/latest_gallery_1.png" alt=""></a></li>
                            <li><a href="#"></a><img src="img/latest_gallery_2.png" alt=""></a></li>
                            <li><a href="#"></a><img src="img/latest_gallery_3.png" alt=""></a></li>
                            <li><a href="#"></a><img src="img/latest_gallery_4.png" alt=""></a></li>
                            <li><a href="#"></a><img src="img/latest_gallery_5.png" alt=""></a></li>
                            <li><a href="#"></a><img src="img/latest_gallery_6.png" alt=""></a></li>
                            <li><a href="#"></a><img src="img/latest_gallery_7.png" alt=""></a></li>
                            <li><a href="#"></a><img src="img/latest_gallery_8.png" alt=""></a></li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <footer id="footer-way"></footer>


    <!-- Modal button -->
    <div class="popup-icon">
      <button id="modBtn" class="modal-btn"><img src="img/contact-icon.png" alt=""></button>
    </div>  

    <!-- Modal -->
    <div id="modal" class="modal">
      <!-- Modal Content -->
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h3 class="header-title">Say hello to <em>Highway</em></h3>
          <div class="close-btn"><img src="img/close_contact.png" alt=""></div>    
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
          <div class="col-md-6 col-md-offset-3">
            <form id="contact" action="" method="post">
                <div class="row">
                    <div class="col-md-12">
                      <fieldset>
                        <input name="name" type="text" class="form-control" id="name" placeholder="Your name..." required="">
                      </fieldset>
                    </div>
                    <div class="col-md-12">
                      <fieldset>
                        <input name="email" type="email" class="form-control" id="email" placeholder="Your email..." required="">
                      </fieldset>
                    </div>
                    <div class="col-md-12">
                      <fieldset>
                        <textarea name="message" rows="6" class="form-control" id="message" placeholder="Your message..." required=""></textarea>
                      </fieldset>
                    </div>
                    <div class="col-md-12">
                      <fieldset>
                        <button type="submit" id="form-submit" class="btn">Send Message Now</button>
                      </fieldset>
                    </div>
                </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!--目录-->
    <section class="overlay-menu"></section>
</body>

    <script>
        $(document).ready(function () {
            // pageFunction()
            // initRightArchives()
            render()
            initRightArchives();

        });
        $("#footer-way").load("/public/footer.html")
        $(".overlay-menu").load("/public/catalog.html")
        // $("#right_meun").load("/public/right.html")
        /**
         ** 右侧档案数据
         * */
        function initRightArchives(){
            syncPost("../bizArticle/queryRecentSixMonthTotal","",function(data){
               var records =  data.data;
               $recentSixMonthTotal =  $("#recentSixMonthTotal")
               $recentSixMonthTotal.empty();
                    $.map(records,function (value,key) {
                        var param = key.replace("年","-").replace("月","-01")
                        var end = '"'+param+'"'
                        $recentSixMonthTotal.append("<li><a href='javascript:void(0);' onclick='quueryRightArchives("+end+")'>>"+key+'('+value +')'+"</a></li>")
                    })
                });
        }
        function quueryRightArchives(key){
            // $('#contents_refresh').load("../bizArticle/queryRecentSixMonthCondition?date="+key);
            render(1,key)
        }
        /**
         ** 页面总数
         * */
        /*function pageFunction(){
            syncPost("../bizArticle/queryAriticesTotal","",function(data){
                total = data.data;
                renderPageItem();
            })
        }*/
        /**
         * 加载资源
         * @param current
         */
        function initLoadContent(current){
            // render(current)
            // $('#contents_refresh').load("../bizArticle/blogList/"+current);
        }

        var total = 0//数据总条数
        pageNumber = 1,//当前页
            pageSize = 3, //每页显示的条数
            edges = 2,//两侧显示的页码数 大于1
            playes = 5,//主页码区显示的页码数 大于3
            pages = 0;//总页数

        function render(current,date) {
            if(!current){
                current = 1
            }
            var param = {
                current:current,
                size:3
            }
            if(current){
                param = {
                    current:current,
                    size:3,
                    date:date
                }
            }
            syncPost("../bizArticle/queryCondition",param,function(data){
                var datas = data.data;
                var $content = $("#contents");
                $content.empty();
                datas.records.forEach(function (info) {
                    $content.append('<div class="col-md-12"> <div class="blog-post"> <img src="img/blog_post_1.png" alt=""><div class="text-content"> <span>'
                        + '<a href="#">'+ info.userId+'</a> /'
                        + '<a href="#">'+ info.createTime+'</a> / '
                        + '<a href="#">'+info.type+'</a></span>'
                        + '<h2>'+info.title+'</h2>'
                        + '<p>'+info.description+'</p>'
                        + '<div class="simple-btn"><a href="../bizArticle/singlePost/'+info.id +'">继续阅读</a></div>'
                        + ' </div> </div> </div>');
                });
                total = datas.total
                renderPageItem();
            })
        }

        function renderPageItem() {
            $ul = $('<ul class="page-number"></ul>');
            var start = 1;
            pages = Math.ceil(total / pageSize)
            if(total<=3){
                playes = 1
                edges=1
            }else{
                playes = 5
                edges=2
            }
            var end = pages;

            if (playes % 2) {
                //playes是奇数
                start = pageNumber - Math.floor(playes / 2);
                end = pageNumber + Math.floor(playes / 2);
            } else {
                //playes是偶数
                start = pageNumber - (playes / 2 - 1);
                end = pageNumber + playes / 2;
            }

            if (start <= edges + 1) {
                start = 1;
                if (end < playes && playes<pages) {
                    end = playes;
                }
            } else {
                for (var i = 1; i <= edges; i++) {
                    $ul.append(renderItem(i));
                }
                $ul.append('<li><span>...</span></li>')
            }
            if (end < pages - edges) {
                for (var i = start; i <= end; i++) {
                    $ul.append(renderItem(i));
                }
                $ul.append('<li><span>...</span></li>');
                for (var i = pages - edges + 1; i <= pages; i++) {
                    $ul.append(renderItem(i));
                }
            } else {
                end = pages;
                if(start>pages-playes+1){
                    start = pages-playes+1
                }
                for (var i = start; i <= end; i++) {
                    $ul.append(renderItem(i));
                }
            }
            $ul.prepend(renderPrevItem());
            $ul.append(renderNextItem());
            $('#pageBox').empty().append($ul);

        }

        function renderItem(i) {
            $item = $('<li><a href="#">' + i + '</a></li>');
            if (i == pageNumber) {
                $item.addClass('active');
            }
            $item.on('click', (function (num) {
                return function () {
                    pageNumber = num;
                    renderPageItem();
                    render(pageNumber)
                }
            })(i));
            return $item
        }

        function renderPrevItem() {
            $prev = $('<li><a href="#">&laquo;</a></li>');
            if (pageNumber == 1) {
                $prev.addClass('disabled');
            } else {
                $prev.on('click', function () {
                    pageNumber = pageNumber - 1;
                    renderPageItem();
                    render(pageNumber)
                })
            }
            return $prev;
        }

        function renderNextItem() {
            $next = $('<li><a href="#">&raquo;</a></li>');
            if (pageNumber == pages) {
                $next.addClass('disabled');
            } else {
                $next.on('click', function () {
                    pageNumber = pageNumber + 1;
                    renderPageItem();
                    render(pageNumber)
                })
            }
            return $next;
        }

    </script>
</body>
</html>